/**
 *
 * Please note:
 * This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * Do not edit this file manually.
 *
 */

@file:Suppress(
    "ArrayInDataClass",
    "EnumEntryName",
    "RemoveRedundantQualifierName",
    "UnusedImport"
)

package assets_deadlock_api_client.models

import assets_deadlock_api_client.models.AbilityTooltipDetailsV2
import assets_deadlock_api_client.models.AbilityTypeV2
import assets_deadlock_api_client.models.AbilityV2
import assets_deadlock_api_client.models.AbilityVideosV2
import assets_deadlock_api_client.models.ItemSlotTypeV2
import assets_deadlock_api_client.models.ItemTierV2
import assets_deadlock_api_client.models.RawAbilityActivationV2
import assets_deadlock_api_client.models.RawAbilityImbueV2
import assets_deadlock_api_client.models.RawAbilityUpgradeV2
import assets_deadlock_api_client.models.RawItemWeaponInfoV2
import assets_deadlock_api_client.models.UpgradeDescriptionV2
import assets_deadlock_api_client.models.UpgradePropertyV2
import assets_deadlock_api_client.models.UpgradeTooltipSectionV2
import assets_deadlock_api_client.models.UpgradeV2
import assets_deadlock_api_client.models.WeaponV2

import com.google.gson.Gson
import com.google.gson.JsonElement
import com.google.gson.TypeAdapter
import com.google.gson.TypeAdapterFactory
import com.google.gson.reflect.TypeToken
import com.google.gson.stream.JsonReader
import com.google.gson.stream.JsonWriter
import com.google.gson.annotations.JsonAdapter
import com.google.gson.annotations.SerializedName
import java.io.Serializable
import java.io.IOException

/**
 * 
 *
 */


data class ResponseGetItemV2ItemsIdOrClassNameGet(var actualInstance: Any? = null) {

    class CustomTypeAdapterFactory : TypeAdapterFactory {
        override fun <T> create(gson: Gson, type: TypeToken<T>): TypeAdapter<T>? {
            if (!ResponseGetItemV2ItemsIdOrClassNameGet::class.java.isAssignableFrom(type.rawType)) {
                return null // this class only serializes 'ResponseGetItemV2ItemsIdOrClassNameGet' and its subtypes
            }
            val elementAdapter = gson.getAdapter(JsonElement::class.java)
            val adapterAbilityV2 = gson.getDelegateAdapter(this, TypeToken.get(AbilityV2::class.java))
            val adapterWeaponV2 = gson.getDelegateAdapter(this, TypeToken.get(WeaponV2::class.java))
            val adapterUpgradeV2 = gson.getDelegateAdapter(this, TypeToken.get(UpgradeV2::class.java))

            @Suppress("UNCHECKED_CAST")
            return object : TypeAdapter<ResponseGetItemV2ItemsIdOrClassNameGet?>() {
                @Throws(IOException::class)
                override fun write(out: JsonWriter,value: ResponseGetItemV2ItemsIdOrClassNameGet?) {
                    if (value?.actualInstance == null) {
                        elementAdapter.write(out, null)
                        return
                    }

                    // check if the actual instance is of the type `AbilityV2`
                    if (value.actualInstance is AbilityV2) {
                        val element = adapterAbilityV2.toJsonTree(value.actualInstance as AbilityV2?)
                        elementAdapter.write(out, element)
                        return
                    }
                    // check if the actual instance is of the type `WeaponV2`
                    if (value.actualInstance is WeaponV2) {
                        val element = adapterWeaponV2.toJsonTree(value.actualInstance as WeaponV2?)
                        elementAdapter.write(out, element)
                        return
                    }
                    // check if the actual instance is of the type `UpgradeV2`
                    if (value.actualInstance is UpgradeV2) {
                        val element = adapterUpgradeV2.toJsonTree(value.actualInstance as UpgradeV2?)
                        elementAdapter.write(out, element)
                        return
                    }
                    throw IOException("Failed to serialize as the type doesn't match oneOf schemas: AbilityV2, UpgradeV2, WeaponV2")
                }

                @Throws(IOException::class)
                override fun read(jsonReader: JsonReader): ResponseGetItemV2ItemsIdOrClassNameGet {
                    val jsonElement = elementAdapter.read(jsonReader)
                    var match = 0
                    val errorMessages = ArrayList<String>()
                    var actualAdapter: TypeAdapter<*> = elementAdapter

                    // deserialize AbilityV2
                    try {
                        // validate the JSON object to see if any exception is thrown
                        AbilityV2.validateJsonElement(jsonElement)
                        actualAdapter = adapterAbilityV2
                        match++
                        //log.log(Level.FINER, "Input data matches schema 'AbilityV2'")
                    } catch (e: Exception) {
                        // deserialization failed, continue
                        errorMessages.add(String.format("Deserialization for AbilityV2 failed with `%s`.", e.message))
                        //log.log(Level.FINER, "Input data does not match schema 'AbilityV2'", e)
                    }
                    // deserialize WeaponV2
                    try {
                        // validate the JSON object to see if any exception is thrown
                        WeaponV2.validateJsonElement(jsonElement)
                        actualAdapter = adapterWeaponV2
                        match++
                        //log.log(Level.FINER, "Input data matches schema 'WeaponV2'")
                    } catch (e: Exception) {
                        // deserialization failed, continue
                        errorMessages.add(String.format("Deserialization for WeaponV2 failed with `%s`.", e.message))
                        //log.log(Level.FINER, "Input data does not match schema 'WeaponV2'", e)
                    }
                    // deserialize UpgradeV2
                    try {
                        // validate the JSON object to see if any exception is thrown
                        UpgradeV2.validateJsonElement(jsonElement)
                        actualAdapter = adapterUpgradeV2
                        match++
                        //log.log(Level.FINER, "Input data matches schema 'UpgradeV2'")
                    } catch (e: Exception) {
                        // deserialization failed, continue
                        errorMessages.add(String.format("Deserialization for UpgradeV2 failed with `%s`.", e.message))
                        //log.log(Level.FINER, "Input data does not match schema 'UpgradeV2'", e)
                    }

                    if (match == 1) {
                        val ret = ResponseGetItemV2ItemsIdOrClassNameGet()
                        ret.actualInstance = actualAdapter.fromJsonTree(jsonElement)
                        return ret
                    }

                    throw IOException(String.format("Failed deserialization for ResponseGetItemV2ItemsIdOrClassNameGet: %d classes match result, expected 1. Detailed failure message for oneOf schemas: %s. JSON: %s", match, errorMessages, jsonElement.toString()))
                }
            }.nullSafe() as TypeAdapter<T>
        }
    }

    companion object {
        /**
        * Validates the JSON Element and throws an exception if issues found
        *
        * @param jsonElement JSON Element
        * @throws IOException if the JSON Element is invalid with respect to ResponseGetItemV2ItemsIdOrClassNameGet
        */
        @Throws(IOException::class)
        fun validateJsonElement(jsonElement: JsonElement?) {
            requireNotNull(jsonElement) {
                "Provided json element must not be null"
            }
            var match = 0
            val errorMessages = ArrayList<String>()
            // validate the json string with AbilityV2
            try {
                // validate the JSON object to see if any exception is thrown
                AbilityV2.validateJsonElement(jsonElement)
                match++
            } catch (e: Exception) {
                // Validation failed, continue
                errorMessages.add(String.format("Validation for AbilityV2 failed with `%s`.", e.message))
            }
            // validate the json string with WeaponV2
            try {
                // validate the JSON object to see if any exception is thrown
                WeaponV2.validateJsonElement(jsonElement)
                match++
            } catch (e: Exception) {
                // Validation failed, continue
                errorMessages.add(String.format("Validation for WeaponV2 failed with `%s`.", e.message))
            }
            // validate the json string with UpgradeV2
            try {
                // validate the JSON object to see if any exception is thrown
                UpgradeV2.validateJsonElement(jsonElement)
                match++
            } catch (e: Exception) {
                // Validation failed, continue
                errorMessages.add(String.format("Validation for UpgradeV2 failed with `%s`.", e.message))
            }

            if (match != 1) {
                throw IOException(String.format("Failed validation for ResponseGetItemV2ItemsIdOrClassNameGet: %d classes match result, expected 1. Detailed failure message for oneOf schemas: %s. JSON: %s", match, errorMessages, jsonElement.toString()))
            }
        }
    }
}
